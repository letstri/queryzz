(function(y,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(y=typeof globalThis<"u"?globalThis:y||self,m(y.queryzz={}))})(this,function(y){"use strict";function m(e,s=!0){if(e.constructor.name!=="Object")throw new Error("[queryzz]: param is not an object.");return Object.entries(e).map(([o,a])=>Array.isArray(a)?a.map(p=>`${o}=${s?encodeURIComponent(String(p)):p}`).join("&"):`${o}=${s?encodeURIComponent(String(a)):a}`).join("&")}const S=e=>{try{const s=JSON.parse(e);return typeof s=="number"||typeof s=="boolean"||s===void 0||s===null?s:e}catch{return e}};function j(e){if(e&&e.constructor.name!=="String"&&e.constructor.name!=="Object")throw new Error("[queryzz]: param is not an object or a string.");const{search:s}=window.location;let o=(typeof e=="string"?e:e==null?void 0:e.link)||s;if(e)try{o=new URL(o).search}catch{if(typeof e=="string"||typeof(e==null?void 0:e.link)=="string"){const[u,l]=o.split("?"),f=l||u;f.split("&").length>0&&(o=f)}}const a={link:o,parse:!0,arrays:[],...typeof e=="object"&&e||{}},p=Array.isArray(a.arrays)?a.arrays.filter(n=>typeof n=="string"):[],h=(o.startsWith("?")?o.slice(1):o).split("&").filter(n=>!!n&&n.split("=")[1]),g=p.reduce((n,u)=>({...n,[u]:[]}),{});return h.reduce((n,u)=>{const[l,f]=u.split("="),t=a.parse?S(decodeURIComponent(f)):decodeURIComponent(f);if(l in n){const r=n[l];return{...n,[l]:Array.isArray(r)?[...r,t]:[r,t]}}return{...n,[l]:t}},g)}function A(e,s){const{saveOld:o,saveHash:a,saveEmpty:p,replaceState:O}={saveOld:!0,saveHash:!0,saveEmpty:!1,replaceState:!1,...s},h=e&&e.constructor.name==="Object"?Object.entries(e).reduce((t,[r,c])=>{const d=Array.isArray(c)?[...new Set(c.flat(1/0).map(String))]:c;return{...t,[r]:d}},{}):{},g=j({parse:!1}),n=[...Object.entries(h),...Object.entries(g)],u=o&&Object.keys(g).length!==0?n.reduce((t,[r,c])=>{const d=r in t,i=r in g;if(d&&!i){const b=t[r],w=[...new Set([Array.isArray(b)?b:[b],Array.isArray(c)?c:[c]].flat())];return{...t,[r]:w}}return d&&i?t:{...t,[r]:c}},{}):h,l=Object.entries(u).filter(([t])=>t!=="&").sort(([t],[r])=>t.localeCompare(r)).map(([t,r])=>{const c=i=>`${encodeURIComponent(t)}=${encodeURIComponent(i)}`,d=(i=r)=>p?!!t:!!t&&i!==null&&i!==void 0&&i!=="";return Array.isArray(r)?r.map(i=>d(i)?c(i):"").filter(Boolean).join("&"):d()?c(r):""}).filter(Boolean).join("&"),f=a?window.location.href.split("#")[1]:"";window.history[O?"replaceState":"pushState"]({},document.title,l?`?${l}${f?`#${f}`:""}`:window.location.href.split("?")[0].split("#")[0]+(f?`#${f}`:""))}y.formatQuery=m,y.getQuery=j,y.setQuery=A,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"})});
